/*
	pngtoy version 0.5.5 ALPHA
	(c) 2015-2016 Epistemex.com
	MIT License
*/
function PngToy(c){c=c||{};this.doCRC=a(c.doCRC)?c.doCRC:!0;this.allowInvalid=a(c.allowInvalid)?c.allowInvalid:!1;this.beforeSend=c.beforeSend||b;function b(){}this.url=null;this.buffer=null;this.view=null;this.chunks=null;this.debug={};function a(d){return typeof d==="boolean"}}PngToy.prototype={fetch:function(b){var a=this;a.url=b;a.buffer=a.chunks=a.view=null;a._pos=0;return new Promise(function(e,d){try{var f=new XMLHttpRequest();f.open("GET",b,!0);f.responseType="arraybuffer";a.beforeSend(f);f.onerror=function(g){d("Network error. "+g.message)};f.onload=function(){if(f.status===200){var h=new DataView(f.response),g;if(h.getUint32(0)===2303741511&&h.getUint32(4)===218765834){a.buffer=h.buffer;a.view=h;g=PngToy._getChunks(a.buffer,a.view,a.doCRC,a.allowInvalid);a.chunks=g.chunks||null;if(a.chunks||a.allowInvalid){e()}else{d(g.error)}}else{d("Not a PNG file.")}}else{d("Loading error:"+f.statusText)}};f.send()}catch(c){d(c.message)}})},getChunk:function(a){var b=["IHDR","IDAT","PLTE","sPLT","tRNS","iTXt","tEXt","zTXt","iCCP","gAMA","cHRM","sRGB","hIST","sBIT","pHYs","bKGD","tIME","oFFs","sTER","sCAL","pCAL","IEND"];if(b.indexOf(a)>-1){return a==="IEND"?!!PngToy._findChunk(this.chunks,"IEND"):PngToy["_"+a](this)}else{return PngToy._findChunk(this.chunks,a)}},getGammaLUT:function(c,b,f){c=c||1;b=b||2.2;f=f||1;var a=new Uint8Array(256),e=0,d=1/(c*b*f);for(;e<256;e++){a[e]=Math.round(Math.pow(e/255,d)*255)}return a},guessDisplayGamma:function(){return navigator.userAgent.indexOf("Mac OS")>-1?1.8:2.2}};PngToy._blockSize=3000000;PngToy._delay=7;PngToy._getChunks=function(b,F,k,a){var x=this,C=8,v=b.byteLength,e=[],d,w,m,A,h,g,B,E,p,z,D,t=!0,y=["iTXT","tIME","tEXt","zTXt"],l=PngToy._findChunk;if(k&&!this.table){this.table=new Uint32Array(256);for(var q=0,u;q<256;q++){h=q>>>0;for(u=0;u<8;u++){h=(h&1)?3988292384^(h>>>1):h>>>1}this.table[q]=h}}while(C<v){w=o();m=n();if(w>2147483647&&!a){return{error:"Invalid chunk size."}}A=C;C=A+w;h=o();d=new PngToy.Chunk(m,A,w,h);if(k){c(d);if(!d.crcOk&&!a){return{error:"Invalid CRC in chunk "+m}}}if(d.isReserved&&!a){return{error:"Invalid chunk name: "+m}}e.push(d)}if(!a){if(!f("IHDR",1,1)){return{error:"Invalid number of IHDR chunks."}}if(!f("tIME",0,1)){return{error:"Invalid number of tIME chunks."}}if(!f("zTXt",0,-1)){return{error:"Invalid number of zTXt chunks."}}if(!f("tEXt",0,-1)){return{error:"Invalid number of tEXt chunks."}}if(!f("iTXt",0,-1)){return{error:"Invalid number of iTXt chunks."}}if(!f("pHYs",0,1)){return{error:"Invalid number of pHYs chunks."}}if(!f("sPLT",0,-1)){return{error:"Invalid number of sPLT chunks."}}if(!f("iCCP",0,1)){return{error:"Invalid number of iCCP chunks."}}if(!f("sRGB",0,1)){return{error:"Invalid number of sRGB chunks."}}if(!f("sBIT",0,1)){return{error:"Invalid number of sBIT chunks."}}if(!f("gAMA",0,1)){return{error:"Invalid number of gAMA chunks."}}if(!f("cHRM",0,1)){return{error:"Invalid number of cHRM chunks."}}if(!f("PLTE",0,1)){return{error:"Invalid number of PLTE chunks."}}if(!f("tRNS",0,1)){return{error:"Invalid number of tRNS chunks."}}if(!f("hIST",0,1)){return{error:"Invalid number of hIST chunks."}}if(!f("bKGD",0,1)){return{error:"Invalid number of bKGD chunks."}}if(!f("IDAT",1,-1)){return{error:"Invalid number of IDAT chunks."}}if(!f("IEND",1,1)){return{error:"Invalid number of IEND chunks."}}if(e[0].name!=="IHDR"||e[e.length-1].name!=="IEND"){return{error:"Invalid PNG chunk order."}}g=F.getUint8(l(e,"IHDR").offset+9);B=l(e,"PLTE");p=l(e,"hIST");E=l(e,"tRNS");z=l(e,"oFFs");D=l(e,"sTER");if(l(e,"iCCP")&&l(e,"sRGB")){return{error:"Both iCCP and sRGB cannot be present."}}if(g===3&&!B){return{error:"Missing PLTE chunk."}}if((g===0||g===4)&&B){return{error:"PLTE chunk should not appear with this color type."}}if((g===4||g===6)&&E){return{error:"tRNS chunk should not appear with this color type."}}if(p&&!B){return{error:"hIST chunk can only appear if a PLTE chunk is present."}}if(B){if(!r("PLTE","IDAT")){return{error:"Invalid chunk order for PLTE."}}if(p&&!s("PLTE","hIST","IDAT")){return{error:"Invalid chunk order for hIST."}}if(E&&!s("PLTE","tRNS","IDAT")){return{error:"Invalid chunk order for tRNS."}}if(l(e,"bKGD")&&!s("PLTE","bKGD","IDAT")){return{error:"Invalid chunk order for bKGD."}}if(!r("cHRM","PLTE")){return{error:"Invalid chunk order for cHRM."}}if(!r("gAMA","PLTE")){return{error:"Invalid chunk order for gAMA."}}if(!r("iCCP","PLTE")){return{error:"Invalid chunk order for iCCP."}}if(!r("sRGB","PLTE")){return{error:"Invalid chunk order for sRGB."}}}if(z&&!r("oFFs","IDAT")){return{error:"Invalid chunk order for oFFs."}}if(D&&!r("sTER","IDAT")){return{error:"Invalid chunk order for sTER."}}for(q=e.length-2;q>0;q--){if(t&&e[q].name!=="IDAT"&&y.indexOf(e[q].name)<0){t=!1}else{if(!t&&e[q].name==="IDAT"){return{error:"Invalid chunk inside IDAT chunk sequence."}}}}}return{chunks:e};function f(i,H,G){var j=PngToy._findChunks(e,i);return G<0?j.length>=H:j.length>=H&&j.length<=G}function s(j,G,i){return r(j,G)&&r(G,i)}function r(j,H){var G=-1,I=-1,J,K=e.length;for(J=0;J<K;J++){if(e[J].name===j){G=J}if(e[J].name===H){I=J}}return(G<I)}function c(j){var G=new Uint8Array(b,j.offset-4,j.length+4);j.crcOk=(j.crc===i(G));function i(H){var I=(-1>>>0),K=H.length,J;for(J=0;J<K;J++){I=(I>>>8)^x.table[(I^H[J])&255]}return(I^-1)>>>0}}function n(){var j=o(),i=String.fromCharCode;return i((j&4278190080)>>>24)+i((j&16711680)>>>16)+i((j&65280)>>>8)+i((j&255)>>>0)}function o(){var j=F.getUint32(C);C+=4;return j>>>0}};PngToy._getChunks.table=null;PngToy._findChunk=function(b,d){for(var c=0,a;a=b[c++];){if(a.name===d){return a}}return null};PngToy._findChunks=function(b,e){for(var c=0,d=[],a;a=b[c++];){if(a.name===e){d.push(a)}}return d};PngToy._getStr=function(j,e,d){var g="",c=e,a=-1,h,k=!1,b=String.fromCharCode,f=" abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!\"%&'()*+,-./:;<=>?_";d+=c;for(;c<d&&a;){a=j.getUint8(c++);if(a){h=b(a);if(f.indexOf(h)>-1){g+=h}else{k=!0}continue}break}return{offset:c,text:g,warning:k}};PngToy.Chunk=function(c,d,b,a){this.name=c;this.offset=d;this.length=b;this.crc=a;this.crcOk=!0;this.isCritical=!(c.charCodeAt(0)&32);this.isPrivate=!!(c.charCodeAt(1)&32);this.isReserved=!!(c.charCodeAt(2)&32);this.isCopySafe=!!(c.charCodeAt(3)&32)};PngToy._IHDR=function(d){var g=d.view,c=d.chunks,a=d.allowInvalid,b=PngToy._findChunk(c,"IHDR"),e,f;if(!b){return{error:"Critical - IHDR chunk is missing."}}e=b.offset;f={width:g.getUint32(e),height:g.getUint32(e+4),depth:g.getUint8(e+8),type:g.getUint8(e+9),compression:g.getUint8(e+10),filter:g.getUint8(e+11),interlaced:g.getUint8(e+12)};if(!a){if([0,2,3,4,6].indexOf(f.type)<0){return{error:"Invalid color type."}}switch(f.type){case 0:if([1,2,4,8,16].indexOf(f.depth)<0){return{error:"Invalid color depth."}}break;case 3:if([1,2,4,8].indexOf(f.depth)<0){return{error:"Invalid color depth."}}break;default:if([8,16].indexOf(f.depth)<0){return{error:"Invalid color depth."}}}if(!f.width||!f.height){return{error:"Invalid dimension."}}if(f.compression){return{error:"Invalid compression type."}}if(f.filter){return{error:"Invalid filter type."}}if(f.interlaced<0||f.interlaced>1){return{error:"Invalid interlace mode "+f.interlaced}}}return f};PngToy._IDAT=function(f){var b=f.buffer,d=f.chunks,a=f.allowInvalid,g=0,c,j=!1,h=new pako.Inflate(),e=!1;while(c=d[g++]){if(c.name==="IDAT"){e=!0;break}}while(c){j=c.name==="IEND";if(c.name==="IDAT"){h.push(new Uint8Array(b,c.offset,c.length),j)}c=d[g++]}if(!j&&!a){return{error:"Critical - missing IEND chunk."}}return e?(h.err?{error:h.msg}:{buffer:h.result}):(a?{buffer:null}:{error:"Critical - no IDAT chunk(s)."})};PngToy._PLTE=function(e){var b=e.buffer,d=e.chunks,a=e.allowInvalid,c=PngToy._findChunk(d,"PLTE"),f;if(!c){return null}f=new Uint8Array(b,c.offset,c.length);if(!a){if(f.length%3){return{error:"Invalid palette size."}}if(f.length<3||f.length>3*256){return{error:"Invalid number of palette entries."}}}return{palette:f,length:f.length/3}};PngToy._sPLT=function(d){var f=d.view,c=d.chunks,a=d.allowInvalid,b=PngToy._findChunks(c,"sPLT"),e=[];if(!b.length){return null}b.forEach(function(h){var p={depth:null,name:null,palette:[],entries:0},m,o,l,q,g,n=[],k,j;o=h.offset;m=PngToy._getStr(f,o,80);p.name=m.text;o=m.offset;p.depth=f.getUint8(o++);q=p.depth===8?6:10;g=p.depth===8?1:2;l=h.length-(o-h.offset);j=q===6?f.getUint8.bind(f):f.getUint16.bind(f);for(k=0;k<l;k+=q){n.push(j(o+k),j(o+k+g),j(o+k+g*2),j(o+k+g*3),f.getUint16(o+k+g*4))}p.palette=n;p.entries=n.length/q;if(!a){if((p.depth===8&&l%6)||(p.depth===16&&l%10)){return{error:"Invalid sPLT chunk."}}}e.push(p)});return e};PngToy._tRNS=function(e){var b=e.buffer,d=e.chunks,a=e.allowInvalid,c=PngToy._findChunk(d,"tRNS"),g=PngToy._PLTE(e),f=PngToy._IHDR(e),h;if(!c){return null}if(!a){if(f.type===2&&(c.length%6)){return{error:"Invalid tRNS length."}}}switch(f.type){case 0:h={alphas:new Uint16Array(b.slice(c.offset,c.offset+c.length)),length:c.length>>1};break;case 2:h={alphas:new Uint16Array(b.slice(c.offset,c.offset+c.length)),length:c.length/6};break;case 3:h={alphas:new Uint8Array(b,c.offset,c.length),length:c.length};break;default:return a?{alphas:null,length:0}:{error:"tRNS chunk is not valid for this color type."}}if(!a&&g&&h.length>g.length){return{error:"tRNS chunk contains more entries than palette entries."}}return h};PngToy._hIST=function(e){var i=e.view,c=e.chunks,a=e.allowInvalid,b=PngToy._findChunk(c,"hIST"),g=PngToy._PLTE(e),d=[],h,f;if(!b){return null}if(!a&&b.length%2){return{error:"Invalid length of hIST chunk."}}h=b.offset;f=h+b.length;for(;h<f;h+=2){d.push(i.getUint16(h))}if(!a){if(d.length!==g.length){return{error:"hIST chunk must have same number of entries as PLTE chunk."}}}return{histogram:d}};PngToy._iTXt=function(e){var l=e.view,d=e.chunks,b=e.allowInvalid,c=PngToy._findChunks(d,"iTXt"),j,k,h,f,m=!1,a=!1,g=[];if(!c.length){return null}c.forEach(function(i){if(a){return}var o={};j=i.offset;h=PngToy._getStr(l,j,80);o.keyword=h.text;j=h.offset;if(h.warn){m=!0}o.hasCompression=l.getUint8(j);o.compression=l.getUint8(j+1);j+=2;h=PngToy._getStr(l,j,20);o.language=h.text.toLowerCase();j=h.offset;if(h.warn){m=!0}h=PngToy._getStr(l,j,80);o.keywordLang=h.text;j=h.offset;if(h.warn){m=!0}k=new Uint8Array(l.buffer,j,i.length-(j-i.offset));if(o.hasCompression===1){if(!b&&!o.compression){o={error:"Invalid compression type for iTXt."}}else{try{o.text=pako.inflate(k,{to:"string"})}catch(n){if(b){o.text=""}else{o={error:n}}}}}else{if(!o.hasCompression){h="";for(f=0;f<k.length;f++){h+=String.fromCharCode(k[f])}o.text=h}else{if(b){o.text=""}else{o={error:"Invalid compression flag."}}}}if(!b&&m){a=!0;return{error:"One or more field contains illegal chars."}}g.push(o)});return g};PngToy._tEXt=function(e){var l=e.view,d=e.chunks,b=e.allowInvalid,c=PngToy._findChunks(d,"tEXt"),m=!1,a=!1,j,k,h,f,g=[];if(!c.length){return null}c.forEach(function(i){if(a){return}var n={};j=i.offset;h=PngToy._getStr(l,j,80);n.keyword=h.text;j=h.offset;if(h.warn){m=!0}k=new Uint8Array(l.buffer,j,i.length-(j-i.offset));h="";for(f=0;f<k.length;f++){h+=String.fromCharCode(k[f])}n.text=h;g.push(n);if(!b&&m){a=!0;return{error:"One or more field contains illegal chars."}}});return g};PngToy._zTXt=function(e){var i=e.view,d=e.chunks,b=e.allowInvalid,c=PngToy._findChunks(d,"zTXt"),j=!1,a=!1,f=[],h,g;if(!c.length){return null}c.forEach(function(k){if(a){return}var m={};h=k.offset;g=PngToy._getStr(i,h,80);m.keyword=g.text;h=g.offset;if(g.warn){j=!0}if(i.getUint8(h++)&&!b){m={error:"Invalid compression type."}}else{try{m.text=pako.inflate(new Uint8Array(i.buffer,h,k.length-(h-k.offset)),{to:"string"})}catch(l){if(b){m.text=""}else{m={error:l}}}}if(!b&&j){a=!0;return{error:"One or more field contains illegal chars."}}f.push(m)});return f};PngToy._iCCP=function(){var l=host.view,d=host.chunks,a=host.allowInvalid,c=PngToy._findChunk(d,"iCCP"),j,h,g,f,b,k={name:null,icc:null};if(!c){return null}j=c.offset;h=PngToy._getStr(l,j,80);g=h.text;j=h.offset;if(!a){for(f=0;f<g.length;f++){b=g.charCodeAt(f);if(!(b>31&&b<127)&&!(b>160&&b<256)){return{error:"ICC profile contains illegal chars in name."}}}}k.name=g;if(l.getUint8(j++)&&!a){return{error:"Invalid compression type."}}try{k.icc=pako.inflate(new Uint8Array(l.buffer,j,c.length-(j-c.offset)))}catch(e){if(!a){return{error:e}}}return k};PngToy._gAMA=function(e){var f=e.view,c=e.chunks,a=e.allowInvalid,b=PngToy._findChunk(c,"gAMA"),d;if(!b){return null}d=f.getUint32(b.offset)/100000;if(!a){}return{gamma:d}};PngToy._cHRM=function(d){var g=d.view,c=d.chunks,a=d.allowInvalid,b=PngToy._findChunk(c,"cHRM"),f,e;if(!b){return null}e=b.offset;f={whiteX:g.getUint32(e)/100000,whiteY:g.getUint32(e+4)/100000,redX:g.getUint32(e+8)/100000,redY:g.getUint32(e+12)/100000,greenX:g.getUint32(e+16)/100000,greenY:g.getUint32(e+20)/100000,blueX:g.getUint32(e+24)/100000,blueY:g.getUint32(e+28)/100000};if(!a){}return f};PngToy._sRGB=function(d){var g=d.view,c=d.chunks,a=d.allowInvalid,b=PngToy._findChunk(c,"sRGB"),e,f=["Perceptual","Relative colorimetric","Saturation","Absolute colorimetric"];if(!b){return null}e=g.getUint8(b.offset);if(!a){if(e<0||e>3){return{error:"Invalid range for sRGB render intent."}}}return{intent:e,desc:f[e]||null}};PngToy._pHYs=function(d){var g=d.view,c=d.chunks,a=d.allowInvalid,b=PngToy._findChunk(c,"pHYs"),e,f={};if(!b){return null}e=b.offset;f.ppuX=g.getUint32(e);f.ppuY=g.getUint32(e+4);f.unit=g.getUint8(e+8);if(f.unit===1){f.desc="Meters"}else{f.desc="ratio"}if(!a){if(f.ppuX>2147483647||f.ppuY>2147483647){return{error:"Invalid unit lengths."}}if(f.unit<0||f.unit>1){return{error:"Invalid unit for pHYs chunk."}}}else{f.ppuX&=2147483647;f.ppuY&=2147483647;f.unit&=1}return f};PngToy._bKGD=function(c){var e=c.view,b=c.chunks,a=PngToy._findChunk(b,"bKGD"),d=PngToy._IHDR(c);if(!a){return null}switch(d.type){case 0:case 4:return{background:[e.getUint16(a.offset)]};case 2:case 6:return{background:new Uint16Array(e.buffer,a.offset,6)};default:return{index:e.getUint8(a.offset)}}};PngToy._tIME=function(e){var h=e.view,c=e.chunks,a=e.allowInvalid,b=PngToy._findChunk(c,"tIME"),f,g;if(!b){return null}f=b.offset;g={year:h.getUint16(f),month:h.getUint8(f+2),day:h.getUint8(f+3),hour:h.getUint8(f+4),minute:h.getUint8(f+5),second:h.getUint8(f+6),date:null};if(!a){if(g.year<0||g.year>65535||g.month<1||g.month>12||g.day<1||g.day>31||g.hour<0||g.hour>23||g.minute<0||g.minute>59||g.second<0||g.second>60){return{error:"Invalid timestamp."}}}try{g.date=new Date(g.year,g.month-1,g.day,g.hour,g.minute,Math.min(59,g.second))}catch(d){if(!a){return{error:d}}}return g};PngToy._oFFs=function(d){var g=d.view,c=d.chunks,a=d.allowInvalid,b=PngToy._findChunk(c,"oFFs"),e,f={};if(!b){return null}e=b.offset;f.x=g.getInt32(e);f.y=g.getInt32(e+4);f.unit=g.getUint8(e+8);f.desc=["Pixels","Micrometers"][f.unit]||"Invalid";if(!a){if(f.unit<0||f.unit>1){return{error:"Invalid unit for oFFs chunk."}}}return f};PngToy._sCAL=function(d){var h=d.view,c=d.chunks,a=d.allowInvalid,b=PngToy._findChunk(c,"sCAL"),f,e,g={};if(!b.length){return null}f=b.offset;g.unit=h.getUint8(f++);g.desc=["meters","radians"][g.unit]||null;e=PngToy._getStr(h,f,100000);g.unitsX=e.text;f=e.offset;e=PngToy._getStr(h,f,b.length-(f-b.offset));g.unitsY=e.text;if(!a){if(g.unit<1||g.unit>2){return{error:"Invalid unit"}}}return g};PngToy._pCAL=function(d){var l=d.view,c=d.chunks,a=d.allowInvalid,b=PngToy._findChunk(c,"pCAL"),m=!1,j,g,k={},h=[],e=0,f;if(!b.length){return null}j=b.offset;g=PngToy._getStr(l,j,80);k.calName=g.text;j=g.offset;if(g.warn){m=!0}k.x0=l.getInt32(j);k.x1=l.getInt32(j+4);k.eqType=l.getUint8(j+8);k.eqDesc=["Linear mapping","Base-e exponential mapping","Arbitrary-base exponential mapping","Hyperbolic mapping"][k.eqType]||null;k.paramCount=l.getUint8(j+9);j+=10;g=PngToy._getStr(l,j,10000);k.unitName=g.text;j=g.offset;if(g.warn){m=!0}f=k.paramCount-1;for(;e<f;e++){g=PngToy._getStr(l,j,10000);h.push(g.text);j=g.offset;if(g.warn){m=!0}}g=PngToy._getStr(l,j,b.length-(j-b.offset));h.push(g.text);if(g.warn){m=!0}k.parameters=h;if(!a){if(k.x0===k.x1){return{error:"Invalid x0 or x1."}}if(h.length!==k.paramCount){return{error:"Mismatching parameter count and number of parameters."}}if(k.eqType<0||k.eqType>3){return{error:"Invalid equation type."}}if(m){return{error:"One or more text field contains illegal chars."}}}return k};PngToy.prototype.decode=function(){var a=this;return new Promise(function(Q,P){var C=a.getChunk("IHDR"),Z=C.width,B=C.height,Y=C.type,m=C.depth,g=m/8,D=g===2,M=[1,0,3,1,2,0,4][Y],G=D?65535:255,l=M*g,F=Z*l,E=F+Math.ceil(l),S=a.getChunk("IDAT").buffer,o=new Uint8Array(Math.max(1,Math.ceil(Z*l)*B)),z=[r,s,t,u,v],R=0,n=0,i=0,N=0,ab=0,O,f=S.byteLength,T=S.length,H=[0,4,0,2,0,1,0],I=[0,0,4,0,2,0,1],U=[8,8,4,4,2,2,1],V=[8,8,8,4,4,2,2],d=[8,4,4,2,2,1,1],c=[8,8,4,4,2,2,1],L,W,X,J,e,b,aa;a.debug={pixelWidth:M,byteWidth:g,delta:l,lineLen:F,lineDlt:E,filters:[],preFilt:-1,postFilt:-1,srcPos:-1,srcLen:S.length,pass:0,x:-1,stepX:0,stepY:0,stepsX:0,stepsY:0};if(C.interlaced){if(typeof console!=="undefined"){console.log("WARN: In current alpha interlaced PNGs will not decode properly unless all line-filters are filter 0.")}L=ab=J=0;W=X=e=b=8;setTimeout(k,PngToy._delay)}else{setTimeout(j,PngToy._delay)}function j(){try{var x,ad,y,ac=a.debug.filters,h=PngToy._blockSize;l=Math.ceil(l);while(ab<B&&h>0){y=S[R++];x=z[y];if(ac.indexOf(y)<0){ac.push(y)}ad=Math.min(f,R+F);i=n;while(R<ad){o[n]=x(S[R++],n-l,n-F,n-E)&G;n++}N=i;h-=F;ab++}(ab<B)?setTimeout(j,PngToy._delay):Q(A())}catch(w){P(w)}}function k(){try{var ac,ad,ah,w=PngToy._blockSize,ae=a.debug.filters,am=(Z/W)|0,aj=(B/X)|0,ak=am*aj,al=new Uint8Array(ak);while(ab<B){if(R>=T){ab=B;continue}ad=S[R++];if(ae.indexOf(ad)<0){ae.push(ad)}if(ad<0||ad>4){a.debug.preFilt=S[R-2];a.debug.postFilt=S[R];a.debug.srcPos=R;a.debug.pass=L;a.debug.x=aa;a.debug.stepX=W;a.debug.stepY=X;a.debug.stepsX=Z/W;a.debug.stepsY=B/X}ac=z[ad];lineEnd=Math.min(f,Math.ceil(R+F));i=ab*F;N=Math.max(0,i-F);aa=J;while(aa<F){n=(i+aa*l)|0;ah=0;while(ah<M){O=ac(S[R++],n-Math.ceil(l),n-F,n-Math.ceil(E))&G;for(var ag=0,h=Math.min(b,B-ab);ag<h;ag++){for(var af=0,ai=ag*F,x=Math.min(e,Z-aa);af<x;af++){o[n+ai+af*l]=O}}n++;ah++}aa+=W*l}w-=F;ab+=X}if(ab<B){setTimeout(k,PngToy._delay)}else{if(++L<7){ab=I[L];J=H[L];W=U[L];X=V[L];e=d[L];b=c[L];setTimeout(k,PngToy._delay)}else{Q(A())}}}catch(y){P(y)}}function A(){return{bitmap:D?new Uint16Array(o.buffer):new Uint8Array(o.buffer),width:Z,height:B,byteWidth:g,pixelWidth:M,depth:C.depth,type:C.type}}function p(h){return h<i?0:o[h]>>>0}function q(h){return h<N?0:o[h]>>>0}function r(h){return h}function s(w,h){return w+p(h)}function t(x,h,w){return x+q(w)}function u(x,h,w){return x+((p(h)+q(w))>>>1)}function v(y,h,w,x){return y+K(p(h),q(w),q(x))}function K(h,w,x){var y=h+w-x,ac=Math.abs(y-h),ad=Math.abs(y-w),ae=Math.abs(y-x);if(ac<=ad&&ac<=ae){return h}if(ad<=ae){return w}return x}})};PngToy.prototype.convertToRGBA=function(a,c){var b=this;c=c||{};return new Promise(function(O,N){if(a.type===6&&a.depth===8&&!c.useGamma){var R=c.ignoreAspectRatio?null:b.getChunk("pHYs"),L=R?R.ppuY/(R.ppuX||1):1,M=R?R.ppuX/(R.ppuY||1):1;if(c.ignoreAspectRatio||(!c.ignoreAspectRatio&&L===1&&M===1)){O({bitmap:a.bitmap,width:a.width,height:a.height,ratioX:L,ratioY:M})}return}var J,S,H,k,G,d,U=a.width,D=a.height,T=a.type,g=a.depth,e=g/8,I=[1,0,3,1,2,0,4][T],l=p(T,g),Q=a.bitmap,j=new Uint8Array(U*D*4),P=0,i=0,E=Q.byteLength,K,F;if(a.type===3){J=b.getChunk("PLTE");G=J?J.palette:[]}S=b.getChunk("tRNS");d=S&&S.alphas?S.alphas:[];H=b.getChunk("pHYs");k=b.getChunk("gAMA");k=k?k.gamma:1;(function f(){var h=PngToy._blockSize,V=U*e*I,w=P+V;if(c.useGamma){F=F?F:b.getGammaLUT(k,c.gamma||1);while(P<E&&h>0){if(P>=w){P=Math.ceil(P);w=P+V}K=l();j[i++]=F[K[0]];j[i++]=F[K[1]];j[i++]=F[K[2]];j[i++]=K[3];h--}}else{while(P<E&&h>0){if(P>=w){P=Math.ceil(P);w=P+V}K=l();j[i++]=K[0];j[i++]=K[1];j[i++]=K[2];j[i++]=K[3];h--}}if(P<E){setTimeout(f,PngToy._delay)}else{O({bitmap:j,width:U,height:D,ratioX:H?H.ppuY/(H.ppuX||1):1,ratioY:H?H.ppuX/(H.ppuY||1):1})}})();function r(){var w=Q[P|0],V=(P-(P|0))/e,W=(w&(128>>V))?255:0,h=d.length?((d[0]>>>8)&(128>>V)===W?0:255):255;P+=e;return[W,W,W,h]}function t(){var w=Q[P|0],V=((P-(P|0))/e)<<1,W=(((w>>>V)&3)*85)&255,h=d.length?((((d[0]>>>8)&3)*85)&255===W?0:255):255;P+=e;return[W,W,W,h]}function u(){var w=Q[P|0],V=((P-(P|0))/e),W=V?(w&15)<<4:w&240,h=d.length?(((d[0]&3840)>>>4)===W?0:255):255;P+=e;return[W,W,W,h]}function m(){var h=Q[P|0],w=(P-(P|0))/e,V=(h&(128>>>w))?1:0,W=V*3;P+=e;return[G[W],G[W+1],G[W+2],255]}function n(){var w=Q[P|0],V=((P-(P|0))/e)<<1,W=((w<<V)&192)>>>6,X=W*3,h=W<d.length?d[W]:255;P+=e;return[G[X],G[X+1],G[X+2],h]}function o(){var w=Q[P|0],V=((P-(P|0))/e),W=V?w&15:(w&240)>>>4,X=W*3,h=W<d.length?d[W]:255;P+=e;return[G[X],G[X+1],G[X+2],h]}function q(){var w=Q[P++],h=d.length&&w===(d[0]>>>8)?0:255;w&=255;return[w,w,w,h]}function s(){var w=Q[P++],h=d.length&&d[0]===w?0:255;w&=255;return[w,w,w,h]}function z(){var Z=Q[P++],Y=Q[P++],X=Q[P++],W,V,w,h=255;if(d.length){W=d[0]>>>8;V=d[1]>>>8;w=d[2]>>>8;if(W===Z&&V===Y&&w===X){h=0}}return[Z&255,Y&255,X&255,h]}function B(){return[Q[P++],Q[P++],Q[P++],Q[P++]]}function A(){var W=Q[P++],V=Q[P++],w=Q[P++],h=d.length&&d[0]===W&&d[1]===V&&d[2]===w?0:255;return[W&255,V&255,w&255,h]}function v(){var h=Q[P++];return[h,h,h,Q[P++]]}function x(){var h=Q[P++]&255;return[h,h,h,Q[P++]&255]}function y(){var w=Q[P++],h=w*3;return[G[h],G[h+1],G[h+2],w<d.length?d[w]:255]}function C(){return[Q[P++]&255,Q[P++]&255,Q[P++]&255,Q[P++]&255]}function p(w,h){if(h===16){return[s,0,A,y,x,0,C][w]}else{if(h<8){switch(h){case 1:return w?m:r;case 2:return w?n:t;case 4:return w?o:u}}else{return[q,0,z,y,v,0,B][w]}}}})};PngToy.prototype.convertToCanvas=function(a,c){var b=this;c=c||{};return new Promise(function(e,d){b.convertToRGBA(a,c).then(function(f){try{var g=document.createElement("canvas"),i=g.getContext("2d");g.width=f.width;g.height=f.height;var l=i.createImageData(f.width,f.height);l.data.set(f.bitmap);i.putImageData(l,0,0);if((f.ratioY!==1||f.ratioX!==1)&&!c.ignoreAspectRatio){var m=document.createElement("canvas"),n=m.getContext("2d"),o,k;if(f.ratioY>=1){o=g.width;k=(g.height*f.ratioY)|0}else{if(f.ratioY<1){o=(g.width*f.ratioX)|0;k=g.height}}m.width=o;m.height=k;n.drawImage(g,0,0,o,k);g=m}e(g)}catch(j){d(j)}},d)})};(function(a){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=a()}else{if(typeof define==="function"&&define.amd){define([],a)}else{var b;if(typeof window!=="undefined"){b=window}else{if(typeof global!=="undefined"){b=global}else{if(typeof self!=="undefined"){b=self}else{b=this}}}b.pako=a()}}})(function(){var a,d,c;return(function b(k,f,h){function j(p,q){if(!f[p]){if(!k[p]){var i=typeof require=="function"&&require;if(!q&&i){return i(p,!0)}if(e){return e(p,!0)}var m=new Error("Cannot find module '"+p+"'");throw m.code="MODULE_NOT_FOUND",m}var n=f[p]={exports:{}};k[p][0].call(n.exports,function(l){var o=k[p][1][l];return j(o?o:l)},n,n.exports,b,k,f,h)}return f[p].exports}var e=typeof require=="function"&&require;for(var g=0;g<h.length;g++){j(h[g])}return j})({1:[function(i,h,e){var j=(typeof Uint8Array!=="undefined")&&(typeof Uint16Array!=="undefined")&&(typeof Int32Array!=="undefined");e.assign=function(k){var n=Array.prototype.slice.call(arguments,1);while(n.length){var m=n.shift();if(!m){continue}if(typeof m!=="object"){throw new TypeError(m+"must be non-object")}for(var l in m){if(m.hasOwnProperty(l)){k[l]=m[l]}}}return k};e.shrinkBuf=function(k,l){if(k.length===l){return k}if(k.subarray){return k.subarray(0,l)}k.length=l;return k};var f={arraySet:function(k,o,p,n,l){if(o.subarray&&k.subarray){k.set(o.subarray(p,p+n),l);return}for(var m=0;m<n;m++){k[l+m]=o[p+m]}},flattenChunks:function(m){var n,o,p,q,k,r;p=0;for(n=0,o=m.length;n<o;n++){p+=m[n].length}r=new Uint8Array(p);q=0;for(n=0,o=m.length;n<o;n++){k=m[n];r.set(k,q);q+=k.length}return r}};var g={arraySet:function(k,o,p,n,l){for(var m=0;m<n;m++){k[l+m]=o[p+m]}},flattenChunks:function(k){return[].concat.apply([],k)}};e.setTyped=function(k){if(k){e.Buf8=Uint8Array;e.Buf16=Uint16Array;e.Buf32=Int32Array;e.assign(e,f)}else{e.Buf8=Array;e.Buf16=Array;e.Buf32=Array;e.assign(e,g)}};e.setTyped(j)},{}],2:[function(k,i,h){var n=k("./common");var l=!0;var m=!0;try{String.fromCharCode.apply(null,[0])}catch(e){l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){m=!1}var f=new n.Buf8(256);for(var j=0;j<256;j++){f[j]=(j>=252?6:j>=248?5:j>=240?4:j>=224?3:j>=192?2:1)}f[254]=f[254]=1;h.string2buf=function(u){var o,q,r,t,s,v=u.length,p=0;for(t=0;t<v;t++){q=u.charCodeAt(t);if((q&64512)===55296&&(t+1<v)){r=u.charCodeAt(t+1);if((r&64512)===56320){q=65536+((q-55296)<<10)+(r-56320);t++}}p+=q<128?1:q<2048?2:q<65536?3:4}o=new n.Buf8(p);for(s=0,t=0;s<p;t++){q=u.charCodeAt(t);if((q&64512)===55296&&(t+1<v)){r=u.charCodeAt(t+1);if((r&64512)===56320){q=65536+((q-55296)<<10)+(r-56320);t++}}if(q<128){o[s++]=q}else{if(q<2048){o[s++]=192|(q>>>6);o[s++]=128|(q&63)}else{if(q<65536){o[s++]=224|(q>>>12);o[s++]=128|(q>>>6&63);o[s++]=128|(q&63)}else{o[s++]=240|(q>>>18);o[s++]=128|(q>>>12&63);o[s++]=128|(q>>>6&63);o[s++]=128|(q&63)}}}}return o};function g(o,q){if(q<65537){if((o.subarray&&m)||(!o.subarray&&l)){return String.fromCharCode.apply(null,n.shrinkBuf(o,q))}}var r="";for(var p=0;p<q;p++){r+=String.fromCharCode(o[p])}return r}h.buf2binstring=function(o){return g(o,o.length)};h.binstring2buf=function(r){var o=new n.Buf8(r.length);for(var p=0,q=o.length;p<q;p++){o[p]=r.charCodeAt(p)}return o};h.buf2string=function(o,t){var r,u,p,q;var s=t||o.length;var v=new Array(s*2);for(u=0,r=0;r<s;){p=o[r++];if(p<128){v[u++]=p;continue}q=f[p];if(q>4){v[u++]=65533;r+=q-1;continue}p&=q===2?31:q===3?15:7;while(q>1&&r<s){p=(p<<6)|(o[r++]&63);q--}if(q>1){v[u++]=65533;continue}if(p<65536){v[u++]=p}else{p-=65536;v[u++]=55296|((p>>10)&1023);v[u++]=56320|(p&1023)}}return g(v,u)};h.utf8border=function(o,p){var q;p=p||o.length;if(p>o.length){p=o.length}q=p-1;while(q>=0&&(o[q]&192)===128){q--}if(q<0){return p}if(q===0){return p}return(q+f[o[q]]>p)?q:p}},{"./common":1}],3:[function(h,g,f){function e(i,j,k,m){var o=(i&65535)|0,p=((i>>>16)&65535)|0,l=0;while(k!==0){l=k>2000?2000:k;k-=l;do{o=(o+j[m++])|0;p=(p+o)|0}while(--l);o%=65521;p%=65521}return(o|(p<<16))|0}g.exports=e},{}],4:[function(g,f,e){f.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],5:[function(i,h,g){var f=PngToy._getChunks.table;function e(k,j,n,o){var p=f,l=o+n;k^=-1;for(var m=o;m<l;m++){k=(k>>>8)^p[(k^j[m])&255]}return(k^(-1))}h.exports=e},{}],6:[function(h,g,e){function f(){this.text=0;this.time=0;this.xflags=0;this.os=0;this.extra=null;this.extra_len=0;this.name="";this.comment="";this.hcrc=0;this.done=!1}g.exports=f},{}],7:[function(i,h,f){var e=30;var j=12;h.exports=function g(H,F){var G;var k;var y;var l;var m;var s;var r;var K;var I;var J;var E;var w;var n;var z;var o;var B;var q;var v;var C;var A;var p;var t;var u;var x,D;G=H.state;k=H.next_in;x=H.input;y=k+(H.avail_in-5);l=H.next_out;D=H.output;m=l-(F-H.avail_out);s=l+(H.avail_out-257);r=G.dmax;K=G.wsize;I=G.whave;J=G.wnext;E=G.window;w=G.hold;n=G.bits;z=G.lencode;o=G.distcode;B=(1<<G.lenbits)-1;q=(1<<G.distbits)-1;top:do{if(n<15){w+=x[k++]<<n;n+=8;w+=x[k++]<<n;n+=8}v=z[w&B];dolen:for(;;){C=v>>>24;w>>>=C;n-=C;C=(v>>>16)&255;if(C===0){D[l++]=v&65535}else{if(C&16){A=v&65535;C&=15;if(C){if(n<C){w+=x[k++]<<n;n+=8}A+=w&((1<<C)-1);w>>>=C;n-=C}if(n<15){w+=x[k++]<<n;n+=8;w+=x[k++]<<n;n+=8}v=o[w&q];dodist:for(;;){C=v>>>24;w>>>=C;n-=C;C=(v>>>16)&255;if(C&16){p=v&65535;C&=15;if(n<C){w+=x[k++]<<n;n+=8;if(n<C){w+=x[k++]<<n;n+=8}}p+=w&((1<<C)-1);if(p>r){H.msg="invalid distance too far back";G.mode=e;break top}w>>>=C;n-=C;C=l-m;if(p>C){C=p-C;if(C>I){if(G.sane){H.msg="invalid distance too far back";G.mode=e;break top}}t=0;u=E;if(J===0){t+=K-C;if(C<A){A-=C;do{D[l++]=E[t++]}while(--C);t=l-p;u=D}}else{if(J<C){t+=K+J-C;C-=J;if(C<A){A-=C;do{D[l++]=E[t++]}while(--C);t=0;if(J<A){C=J;A-=C;do{D[l++]=E[t++]}while(--C);t=l-p;u=D}}}else{t+=J-C;if(C<A){A-=C;do{D[l++]=E[t++]}while(--C);t=l-p;u=D}}}while(A>2){D[l++]=u[t++];D[l++]=u[t++];D[l++]=u[t++];A-=3}if(A){D[l++]=u[t++];if(A>1){D[l++]=u[t++]}}}else{t=l-p;do{D[l++]=D[t++];D[l++]=D[t++];D[l++]=D[t++];A-=3}while(A>2);if(A){D[l++]=D[t++];if(A>1){D[l++]=D[t++]}}}}else{if((C&64)===0){v=o[(v&65535)+(w&((1<<C)-1))];continue dodist}else{H.msg="invalid distance code";G.mode=e;break top}}break}}else{if((C&64)===0){v=z[(v&65535)+(w&((1<<C)-1))];continue dolen}else{if(C&32){G.mode=j;break top}else{H.msg="invalid literal/length code";G.mode=e;break top}}}}break}}while(k<y&&l<s);A=n>>3;k-=A;n-=A<<3;w&=(1<<n)-1;H.next_in=k;H.next_out=l;H.avail_in=(k<y?5+(y-k):5-(k-y));H.avail_out=(l<s?257+(s-l):257-(l-s));G.hold=w;G.bits=n;return}},{}],8:[function(ae,ab,y){var am=ae("../utils/common");var e=ae("./adler32");var m=ae("./crc32");var F=ae("./inffast");var G=ae("./inftrees");var i=0;var W=1;var t=2;var at=4;var ao=5;var az=6;var aw=0;var ax=1;var av=2;var ay=-2;var aq=-3;var au=-4;var ap=-5;var ar=8;var D=1;var B=2;var ai=3;var ad=4;var x=5;var z=6;var ac=7;var j=8;var C=9;var p=10;var o=11;var aj=12;var ak=13;var af=14;var l=15;var k=16;var ah=17;var V=18;var h=19;var R=20;var Q=21;var S=22;var q=23;var r=24;var Y=25;var X=26;var g=27;var U=28;var u=29;var f=30;var aa=31;var ag=32;var w=852;var v=592;var Z=15;var n=Z;function aA(aB){return(((aB>>>24)&255)+((aB>>>8)&65280)+((aB&65280)<<8)+((aB&255)<<24))}function P(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.flags=0;this.dmax=0;this.check=0;this.total=0;this.head=null;this.wbits=0;this.wsize=0;this.whave=0;this.wnext=0;this.window=null;this.hold=0;this.bits=0;this.length=0;this.offset=0;this.extra=0;this.lencode=null;this.distcode=null;this.lenbits=0;this.distbits=0;this.ncode=0;this.nlen=0;this.ndist=0;this.have=0;this.next=null;this.lens=new am.Buf16(320);this.work=new am.Buf16(288);this.lendyn=null;this.distdyn=null;this.sane=0;this.back=0;this.was=0}function N(aC){var aB;if(!aC||!aC.state){return ay}aB=aC.state;aC.total_in=aC.total_out=aB.total=0;aC.msg="";if(aB.wrap){aC.adler=aB.wrap&1}aB.mode=D;aB.last=0;aB.havedict=0;aB.dmax=32768;aB.head=null;aB.hold=0;aB.bits=0;aB.lencode=aB.lendyn=new am.Buf32(w);aB.distcode=aB.distdyn=new am.Buf32(v);aB.sane=1;aB.back=-1;return aw}function L(aC){var aB;if(!aC||!aC.state){return ay}aB=aC.state;aB.wsize=0;aB.whave=0;aB.wnext=0;return N(aC)}function M(aC,aD){var aE;var aB;if(!aC||!aC.state){return ay}aB=aC.state;if(aD<0){aE=0;aD=-aD}else{aE=(aD>>4)+1;if(aD<48){aD&=15}}if(aD&&(aD<8||aD>15)){return ay}if(aB.window!==null&&aB.wbits!==aD){aB.window=null}aB.wrap=aE;aB.wbits=aD;return L(aC)}function K(aD,aE){var aB;var aC;if(!aD){return ay}aC=new P();aD.state=aC;aC.window=null;aB=M(aD,aE);if(aB!==aw){aD.state=null}return aB}function J(aB){return K(aB,n)}var an=!0;var T,s;function A(aB){if(an){var aC;T=new am.Buf32(512);s=new am.Buf32(32);aC=0;while(aC<144){aB.lens[aC++]=8}while(aC<256){aB.lens[aC++]=9}while(aC<280){aB.lens[aC++]=7}while(aC<288){aB.lens[aC++]=8}G(W,aB.lens,0,288,T,0,aB.work,{bits:9});aC=0;while(aC<32){aB.lens[aC++]=5}G(t,aB.lens,0,32,s,0,aB.work,{bits:5});an=!1}aB.lencode=T;aB.lenbits=9;aB.distcode=s;aB.distbits=5}function al(aG,aE,aD,aB){var aC;var aF=aG.state;if(aF.window===null){aF.wsize=1<<aF.wbits;aF.wnext=0;aF.whave=0;aF.window=new am.Buf8(aF.wsize)}if(aB>=aF.wsize){am.arraySet(aF.window,aE,aD-aF.wsize,aF.wsize,0);aF.wnext=0;aF.whave=aF.wsize}else{aC=aF.wsize-aF.wnext;if(aC>aB){aC=aB}am.arraySet(aF.window,aE,aD-aB,aC,aF.wnext);aB-=aC;if(aB){am.arraySet(aF.window,aE,aD-aB,aB,0);aF.wnext=aB;aF.whave=aF.wsize}else{aF.wnext+=aC;if(aF.wnext===aF.wsize){aF.wnext=0}if(aF.whave<aF.wsize){aF.whave+=aC}}}return 0}function E(a3,aF){var a2;var aP,aZ;var aW;var a0;var aI,aT;var aO;var aD;var aB,aC;var aE;var aG;var aH;var aK=0;var aL,aM,aN;var aQ,aR,aS;var aU;var a1;var aJ=new am.Buf8(4);var aX;var aV;var aY=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a3||!a3.state||!a3.output||(!a3.input&&a3.avail_in!==0)){return ay}a2=a3.state;if(a2.mode===aj){a2.mode=ak}a0=a3.next_out;aZ=a3.output;aT=a3.avail_out;aW=a3.next_in;aP=a3.input;aI=a3.avail_in;aO=a2.hold;aD=a2.bits;aB=aI;aC=aT;a1=aw;inf_leave:for(;;){switch(a2.mode){case D:if(a2.wrap===0){a2.mode=ak;break}while(aD<16){if(aI===0){break inf_leave}aI--;aO+=aP[aW++]<<aD;aD+=8}if((a2.wrap&2)&&aO===35615){a2.check=0;aJ[0]=aO&255;aJ[1]=(aO>>>8)&255;a2.check=m(a2.check,aJ,2,0);aO=0;aD=0;a2.mode=B;break}a2.flags=0;if(a2.head){a2.head.done=!1}if(!(a2.wrap&1)||(((aO&255)<<8)+(aO>>8))%31){a3.msg="incorrect header check";a2.mode=f;break}if((aO&15)!==ar){a3.msg="unknown compression method";a2.mode=f;break}aO>>>=4;aD-=4;aU=(aO&15)+8;if(a2.wbits===0){a2.wbits=aU}else{if(aU>a2.wbits){a3.msg="invalid window size";a2.mode=f;break}}a2.dmax=1<<aU;a3.adler=a2.check=1;a2.mode=aO&512?p:aj;aO=0;aD=0;break;case B:while(aD<16){if(aI===0){break inf_leave}aI--;aO+=aP[aW++]<<aD;aD+=8}a2.flags=aO;if((a2.flags&255)!==ar){a3.msg="unknown compression method";a2.mode=f;break}if(a2.flags&57344){a3.msg="unknown header flags set";a2.mode=f;break}if(a2.head){a2.head.text=((aO>>8)&1)}if(a2.flags&512){aJ[0]=aO&255;aJ[1]=(aO>>>8)&255;a2.check=m(a2.check,aJ,2,0)}aO=0;aD=0;a2.mode=ai;case ai:while(aD<32){if(aI===0){break inf_leave}aI--;aO+=aP[aW++]<<aD;aD+=8}if(a2.head){a2.head.time=aO}if(a2.flags&512){aJ[0]=aO&255;aJ[1]=(aO>>>8)&255;aJ[2]=(aO>>>16)&255;aJ[3]=(aO>>>24)&255;a2.check=m(a2.check,aJ,4,0)}aO=0;aD=0;a2.mode=ad;case ad:while(aD<16){if(aI===0){break inf_leave}aI--;aO+=aP[aW++]<<aD;aD+=8}if(a2.head){a2.head.xflags=(aO&255);a2.head.os=(aO>>8)}if(a2.flags&512){aJ[0]=aO&255;aJ[1]=(aO>>>8)&255;a2.check=m(a2.check,aJ,2,0)}aO=0;aD=0;a2.mode=x;case x:if(a2.flags&1024){while(aD<16){if(aI===0){break inf_leave}aI--;aO+=aP[aW++]<<aD;aD+=8}a2.length=aO;if(a2.head){a2.head.extra_len=aO}if(a2.flags&512){aJ[0]=aO&255;aJ[1]=(aO>>>8)&255;a2.check=m(a2.check,aJ,2,0)}aO=0;aD=0}else{if(a2.head){a2.head.extra=null}}a2.mode=z;case z:if(a2.flags&1024){aE=a2.length;if(aE>aI){aE=aI}if(aE){if(a2.head){aU=a2.head.extra_len-a2.length;if(!a2.head.extra){a2.head.extra=new Array(a2.head.extra_len)}am.arraySet(a2.head.extra,aP,aW,aE,aU)}if(a2.flags&512){a2.check=m(a2.check,aP,aE,aW)}aI-=aE;aW+=aE;a2.length-=aE}if(a2.length){break inf_leave}}a2.length=0;a2.mode=ac;case ac:if(a2.flags&2048){if(aI===0){break inf_leave}aE=0;do{aU=aP[aW+aE++];if(a2.head&&aU&&(a2.length<65536)){a2.head.name+=String.fromCharCode(aU)}}while(aU&&aE<aI);if(a2.flags&512){a2.check=m(a2.check,aP,aE,aW)}aI-=aE;aW+=aE;if(aU){break inf_leave}}else{if(a2.head){a2.head.name=null}}a2.length=0;a2.mode=j;case j:if(a2.flags&4096){if(aI===0){break inf_leave}aE=0;do{aU=aP[aW+aE++];if(a2.head&&aU&&(a2.length<65536)){a2.head.comment+=String.fromCharCode(aU)}}while(aU&&aE<aI);if(a2.flags&512){a2.check=m(a2.check,aP,aE,aW)}aI-=aE;aW+=aE;if(aU){break inf_leave}}else{if(a2.head){a2.head.comment=null}}a2.mode=C;case C:if(a2.flags&512){while(aD<16){if(aI===0){break inf_leave}aI--;aO+=aP[aW++]<<aD;aD+=8}if(aO!==(a2.check&65535)){a3.msg="header crc mismatch";a2.mode=f;break}aO=0;aD=0}if(a2.head){a2.head.hcrc=((a2.flags>>9)&1);a2.head.done=!0}a3.adler=a2.check=0;a2.mode=aj;break;case p:while(aD<32){if(aI===0){break inf_leave}aI--;aO+=aP[aW++]<<aD;aD+=8}a3.adler=a2.check=aA(aO);aO=0;aD=0;a2.mode=o;case o:if(a2.havedict===0){a3.next_out=a0;a3.avail_out=aT;a3.next_in=aW;a3.avail_in=aI;a2.hold=aO;a2.bits=aD;return av}a3.adler=a2.check=1;a2.mode=aj;case aj:if(aF===ao||aF===az){break inf_leave}case ak:if(a2.last){aO>>>=aD&7;aD-=aD&7;a2.mode=g;break}while(aD<3){if(aI===0){break inf_leave}aI--;aO+=aP[aW++]<<aD;aD+=8}a2.last=(aO&1);aO>>>=1;aD-=1;switch((aO&3)){case 0:a2.mode=af;break;case 1:A(a2);a2.mode=R;if(aF===az){aO>>>=2;aD-=2;break inf_leave}break;case 2:a2.mode=ah;break;case 3:a3.msg="invalid block type";a2.mode=f}aO>>>=2;aD-=2;break;case af:aO>>>=aD&7;aD-=aD&7;while(aD<32){if(aI===0){break inf_leave}aI--;aO+=aP[aW++]<<aD;aD+=8}if((aO&65535)!==((aO>>>16)^65535)){a3.msg="invalid stored block lengths";a2.mode=f;break}a2.length=aO&65535;aO=0;aD=0;a2.mode=l;if(aF===az){break inf_leave}case l:a2.mode=k;case k:aE=a2.length;if(aE){if(aE>aI){aE=aI}if(aE>aT){aE=aT}if(aE===0){break inf_leave}am.arraySet(aZ,aP,aW,aE,a0);aI-=aE;aW+=aE;aT-=aE;a0+=aE;a2.length-=aE;break}a2.mode=aj;break;case ah:while(aD<14){if(aI===0){break inf_leave}aI--;aO+=aP[aW++]<<aD;aD+=8}a2.nlen=(aO&31)+257;aO>>>=5;aD-=5;a2.ndist=(aO&31)+1;aO>>>=5;aD-=5;a2.ncode=(aO&15)+4;aO>>>=4;aD-=4;if(a2.nlen>286||a2.ndist>30){a3.msg="too many length or distance symbols";a2.mode=f;break}a2.have=0;a2.mode=V;case V:while(a2.have<a2.ncode){while(aD<3){if(aI===0){break inf_leave}aI--;aO+=aP[aW++]<<aD;aD+=8}a2.lens[aY[a2.have++]]=(aO&7);aO>>>=3;aD-=3}while(a2.have<19){a2.lens[aY[a2.have++]]=0}a2.lencode=a2.lendyn;a2.lenbits=7;aX={bits:a2.lenbits};a1=G(i,a2.lens,0,19,a2.lencode,0,a2.work,aX);a2.lenbits=aX.bits;if(a1){a3.msg="invalid code lengths set";a2.mode=f;break}a2.have=0;a2.mode=h;case h:while(a2.have<a2.nlen+a2.ndist){for(;;){aK=a2.lencode[aO&((1<<a2.lenbits)-1)];aL=aK>>>24;aM=(aK>>>16)&255;aN=aK&65535;if((aL)<=aD){break}if(aI===0){break inf_leave}aI--;aO+=aP[aW++]<<aD;aD+=8}if(aN<16){aO>>>=aL;aD-=aL;a2.lens[a2.have++]=aN}else{if(aN===16){aV=aL+2;while(aD<aV){if(aI===0){break inf_leave}aI--;aO+=aP[aW++]<<aD;aD+=8}aO>>>=aL;aD-=aL;if(a2.have===0){a3.msg="invalid bit length repeat";a2.mode=f;break}aU=a2.lens[a2.have-1];aE=3+(aO&3);aO>>>=2;aD-=2}else{if(aN===17){aV=aL+3;while(aD<aV){if(aI===0){break inf_leave}aI--;aO+=aP[aW++]<<aD;aD+=8}aO>>>=aL;aD-=aL;aU=0;aE=3+(aO&7);aO>>>=3;aD-=3}else{aV=aL+7;while(aD<aV){if(aI===0){break inf_leave}aI--;aO+=aP[aW++]<<aD;aD+=8}aO>>>=aL;aD-=aL;aU=0;aE=11+(aO&127);aO>>>=7;aD-=7}}if(a2.have+aE>a2.nlen+a2.ndist){a3.msg="invalid bit length repeat";a2.mode=f;break}while(aE--){a2.lens[a2.have++]=aU}}}if(a2.mode===f){break}if(a2.lens[256]===0){a3.msg="invalid code -- missing end-of-block";a2.mode=f;break}a2.lenbits=9;aX={bits:a2.lenbits};a1=G(W,a2.lens,0,a2.nlen,a2.lencode,0,a2.work,aX);a2.lenbits=aX.bits;if(a1){a3.msg="invalid literal/lengths set";a2.mode=f;break}a2.distbits=6;a2.distcode=a2.distdyn;aX={bits:a2.distbits};a1=G(t,a2.lens,a2.nlen,a2.ndist,a2.distcode,0,a2.work,aX);a2.distbits=aX.bits;if(a1){a3.msg="invalid distances set";a2.mode=f;break}a2.mode=R;if(aF===az){break inf_leave}case R:a2.mode=Q;case Q:if(aI>=6&&aT>=258){a3.next_out=a0;a3.avail_out=aT;a3.next_in=aW;a3.avail_in=aI;a2.hold=aO;a2.bits=aD;F(a3,aC);a0=a3.next_out;aZ=a3.output;aT=a3.avail_out;aW=a3.next_in;aP=a3.input;aI=a3.avail_in;aO=a2.hold;aD=a2.bits;if(a2.mode===aj){a2.back=-1}break}a2.back=0;for(;;){aK=a2.lencode[aO&((1<<a2.lenbits)-1)];aL=aK>>>24;aM=(aK>>>16)&255;aN=aK&65535;if(aL<=aD){break}if(aI===0){break inf_leave}aI--;aO+=aP[aW++]<<aD;aD+=8}if(aM&&(aM&240)===0){aQ=aL;aR=aM;aS=aN;for(;;){aK=a2.lencode[aS+((aO&((1<<(aQ+aR))-1))>>aQ)];aL=aK>>>24;aM=(aK>>>16)&255;aN=aK&65535;if((aQ+aL)<=aD){break}if(aI===0){break inf_leave}aI--;aO+=aP[aW++]<<aD;aD+=8}aO>>>=aQ;aD-=aQ;a2.back+=aQ}aO>>>=aL;aD-=aL;a2.back+=aL;a2.length=aN;if(aM===0){a2.mode=X;break}if(aM&32){a2.back=-1;a2.mode=aj;break}if(aM&64){a3.msg="invalid literal/length code";a2.mode=f;break}a2.extra=aM&15;a2.mode=S;case S:if(a2.extra){aV=a2.extra;while(aD<aV){if(aI===0){break inf_leave}aI--;aO+=aP[aW++]<<aD;aD+=8}a2.length+=aO&((1<<a2.extra)-1);aO>>>=a2.extra;aD-=a2.extra;a2.back+=a2.extra}a2.was=a2.length;a2.mode=q;case q:for(;;){aK=a2.distcode[aO&((1<<a2.distbits)-1)];aL=aK>>>24;aM=(aK>>>16)&255;aN=aK&65535;if((aL)<=aD){break}if(aI===0){break inf_leave}aI--;aO+=aP[aW++]<<aD;aD+=8}if((aM&240)===0){aQ=aL;aR=aM;aS=aN;for(;;){aK=a2.distcode[aS+((aO&((1<<(aQ+aR))-1))>>aQ)];aL=aK>>>24;aM=(aK>>>16)&255;aN=aK&65535;if((aQ+aL)<=aD){break}if(aI===0){break inf_leave}aI--;aO+=aP[aW++]<<aD;aD+=8}aO>>>=aQ;aD-=aQ;a2.back+=aQ}aO>>>=aL;aD-=aL;a2.back+=aL;if(aM&64){a3.msg="invalid distance code";a2.mode=f;break}a2.offset=aN;a2.extra=(aM)&15;a2.mode=r;case r:if(a2.extra){aV=a2.extra;while(aD<aV){if(aI===0){break inf_leave}aI--;aO+=aP[aW++]<<aD;aD+=8}a2.offset+=aO&((1<<a2.extra)-1);aO>>>=a2.extra;aD-=a2.extra;a2.back+=a2.extra}if(a2.offset>a2.dmax){a3.msg="invalid distance too far back";a2.mode=f;break}a2.mode=Y;case Y:if(aT===0){break inf_leave}aE=aC-aT;if(a2.offset>aE){aE=a2.offset-aE;if(aE>a2.whave){if(a2.sane){a3.msg="invalid distance too far back";a2.mode=f;break}}if(aE>a2.wnext){aE-=a2.wnext;aG=a2.wsize-aE}else{aG=a2.wnext-aE}if(aE>a2.length){aE=a2.length}aH=a2.window}else{aH=aZ;aG=a0-a2.offset;aE=a2.length}if(aE>aT){aE=aT}aT-=aE;a2.length-=aE;do{aZ[a0++]=aH[aG++]}while(--aE);if(a2.length===0){a2.mode=Q}break;case X:if(aT===0){break inf_leave}aZ[a0++]=a2.length;aT--;a2.mode=Q;break;case g:if(a2.wrap){while(aD<32){if(aI===0){break inf_leave}aI--;aO|=aP[aW++]<<aD;aD+=8}aC-=aT;a3.total_out+=aC;a2.total+=aC;if(aC){a3.adler=a2.check=(a2.flags?m(a2.check,aZ,aC,a0-aC):e(a2.check,aZ,aC,a0-aC))}aC=aT;if((a2.flags?aO:aA(aO))!==a2.check){a3.msg="incorrect data check";a2.mode=f;break}aO=0;aD=0}a2.mode=U;case U:if(a2.wrap&&a2.flags){while(aD<32){if(aI===0){break inf_leave}aI--;aO+=aP[aW++]<<aD;aD+=8}if(aO!==(a2.total&4294967295)){a3.msg="incorrect length check";a2.mode=f;break}aO=0;aD=0}a2.mode=u;case u:a1=ax;break inf_leave;case f:a1=aq;break inf_leave;case aa:return au;case ag:default:return ay}}a3.next_out=a0;a3.avail_out=aT;a3.next_in=aW;a3.avail_in=aI;a2.hold=aO;a2.bits=aD;if(a2.wsize||(aC!==a3.avail_out&&a2.mode<f&&(a2.mode<g||aF!==at))){if(al(a3,a3.output,a3.next_out,aC-a3.avail_out)){a2.mode=aa;return au}}aB-=a3.avail_in;aC-=a3.avail_out;a3.total_in+=aB;a3.total_out+=aC;a2.total+=aC;if(a2.wrap&&aC){a3.adler=a2.check=(a2.flags?m(a2.check,aZ,aC,a3.next_out-aC):e(a2.check,aZ,aC,a3.next_out-aC))}a3.data_type=a2.bits+(a2.last?64:0)+(a2.mode===aj?128:0)+(a2.mode===R||a2.mode===l?256:0);if(((aB===0&&aC===0)||aF===at)&&a1===aw){a1=ap}return a1}function H(aC){if(!aC||!aC.state){return ay}var aB=aC.state;if(aB.window){aB.window=null}aC.state=null;return aw}function I(aD,aB){var aC;if(!aD||!aD.state){return ay}aC=aD.state;if((aC.wrap&2)===0){return ay}aC.head=aB;aB.done=!1;return aw}function O(aG,aC){var aD=aC.length;var aF;var aB;var aE;if(!aG||!aG.state){return ay}aF=aG.state;if(aF.wrap!==0&&aF.mode!==o){return ay}if(aF.mode===o){aB=1;aB=e(aB,aC,aD,0);if(aB!==aF.check){return aq}}aE=al(aG,aC,aD,aD);if(aE){aF.mode=aa;return au}aF.havedict=1;return aw}y.inflateReset=L;y.inflateReset2=M;y.inflateResetKeep=N;y.inflateInit=J;y.inflateInit2=K;y.inflate=E;y.inflateEnd=H;y.inflateGetHeader=I;y.inflateSetDictionary=O;y.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(r,q,k){var s=r("../utils/common");var p=15;var j=852;var i=592;var e=0;var n=1;var h=2;var m=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0];var o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78];var f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0];var g=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];q.exports=function l(Z,M,N,w,X,Y,ab,U){var v=U.bits;var L=0;var W=0;var R=0,Q=0;var V=0;var y=0;var z=0;var K=0;var aa=0;var H=0;var J;var D;var O;var P;var S;var t=null;var u=0;var A;var x=new s.Buf16(p+1);var T=new s.Buf16(p+1);var B=null;var C=0;var E,F,G;for(L=0;L<=p;L++){x[L]=0}for(W=0;W<w;W++){x[M[N+W]]++}V=v;for(Q=p;Q>=1;Q--){if(x[Q]!==0){break}}if(V>Q){V=Q}if(Q===0){X[Y++]=(1<<24)|(64<<16)|0;X[Y++]=(1<<24)|(64<<16)|0;U.bits=1;return 0}for(R=1;R<Q;R++){if(x[R]!==0){break}}if(V<R){V=R}K=1;for(L=1;L<=p;L++){K<<=1;K-=x[L];if(K<0){return -1}}if(K>0&&(Z===e||Q!==1)){return -1}T[1]=0;for(L=1;L<p;L++){T[L+1]=T[L]+x[L]}for(W=0;W<w;W++){if(M[N+W]!==0){ab[T[M[N+W]]++]=W}}if(Z===e){t=B=ab;A=19}else{if(Z===n){t=m;u-=257;B=o;C-=257;A=256}else{t=f;B=g;A=-1}}H=0;W=0;L=R;S=Y;y=V;z=0;O=-1;aa=1<<V;P=aa-1;if((Z===n&&aa>j)||(Z===h&&aa>i)){return 1}var I=0;for(;;){I++;E=L-z;if(ab[W]<A){F=0;G=ab[W]}else{if(ab[W]>A){F=B[C+ab[W]];G=t[u+ab[W]]}else{F=32+64;G=0}}J=1<<(L-z);D=1<<y;R=D;do{D-=J;X[S+(H>>z)+D]=(E<<24)|(F<<16)|G|0}while(D!==0);J=1<<(L-1);while(H&J){J>>=1}if(J!==0){H&=J-1;H+=J}else{H=0}W++;if(--x[L]===0){if(L===Q){break}L=M[N+ab[W]]}if(L>V&&(H&P)!==O){if(z===0){z=V}S+=R;y=L-z;K=1<<y;while(y+z<Q){K-=x[y+z];if(K<=0){break}y++;K<<=1}aa+=1<<y;if((Z===n&&aa>j)||(Z===h&&aa>i)){return 1}O=H&P;X[O]=(V<<24)|(y<<16)|(S-Y)|0}}if(H!==0){X[S+H]=((L-z)<<24)|(64<<16)|0}U.bits=V;return 0}},{"../utils/common":1}],10:[function(g,f,e){f.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(g,f,e){function h(){this.input=null;this.next_in=0;this.avail_in=0;this.total_in=0;this.output=null;this.next_out=0;this.avail_out=0;this.total_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}f.exports=h},{}],"/lib/inflate.js":[function(m,k,f){var q=m("./zlib/inflate");var p=m("./utils/common");var n=m("./utils/strings");var e=m("./zlib/constants");var l=m("./zlib/messages");var r=m("./zlib/zstream");var g=m("./zlib/gzheader");var o=Object.prototype.toString;function i(t){if(!(this instanceof i)){return new i(t)}this.options=p.assign({chunkSize:16384,windowBits:0,to:""},t||{});var s=this.options;if(s.raw&&(s.windowBits>=0)&&(s.windowBits<16)){s.windowBits=-s.windowBits;if(s.windowBits===0){s.windowBits=-15}}if((s.windowBits>=0)&&(s.windowBits<16)&&!(t&&t.windowBits)){s.windowBits+=32}if((s.windowBits>15)&&(s.windowBits<48)){if((s.windowBits&15)===0){s.windowBits|=15}}this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new r();this.strm.avail_out=0;var u=q.inflateInit2(this.strm,s.windowBits);if(u!==e.Z_OK){throw new Error(l[u])}this.header=new g();q.inflateGetHeader(this.strm,this.header)}i.prototype.push=function(v,y){var B=this.strm;var u=this.options.chunkSize;var x=this.options.dictionary;var A,s;var z,C,D;var w;var t=!1;if(this.ended){return !1}s=(y===~~y)?y:((y===!0)?e.Z_FINISH:e.Z_NO_FLUSH);if(typeof v==="string"){B.input=n.binstring2buf(v)}else{if(o.call(v)==="[object ArrayBuffer]"){B.input=new Uint8Array(v)}else{B.input=v}}B.next_in=0;B.avail_in=B.input.length;do{if(B.avail_out===0){B.output=new p.Buf8(u);B.next_out=0;B.avail_out=u}A=q.inflate(B,e.Z_NO_FLUSH);if(A===e.Z_NEED_DICT&&x){if(typeof x==="string"){w=n.string2buf(x)}else{if(o.call(x)==="[object ArrayBuffer]"){w=new Uint8Array(x)}else{w=x}}A=q.inflateSetDictionary(this.strm,w)}if(A===e.Z_BUF_ERROR&&t===!0){A=e.Z_OK;t=!1}if(A!==e.Z_STREAM_END&&A!==e.Z_OK){this.onEnd(A);this.ended=!0;return !1}if(B.next_out){if(B.avail_out===0||A===e.Z_STREAM_END||(B.avail_in===0&&(s===e.Z_FINISH||s===e.Z_SYNC_FLUSH))){if(this.options.to==="string"){z=n.utf8border(B.output,B.next_out);C=B.next_out-z;D=n.buf2string(B.output,z);B.next_out=C;B.avail_out=u-C;if(C){p.arraySet(B.output,B.output,z,C,0)}this.onData(D)}else{this.onData(p.shrinkBuf(B.output,B.next_out))}}}if(B.avail_in===0&&B.avail_out===0){t=!0}}while((B.avail_in>0||B.avail_out===0)&&A!==e.Z_STREAM_END);if(A===e.Z_STREAM_END){s=e.Z_FINISH}if(s===e.Z_FINISH){A=q.inflateEnd(this.strm);this.onEnd(A);this.ended=!0;return A===e.Z_OK}if(s===e.Z_SYNC_FLUSH){this.onEnd(e.Z_OK);B.avail_out=0;return !0}return !0};i.prototype.onData=function(s){this.chunks.push(s)};i.prototype.onEnd=function(s){if(s===e.Z_OK){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=p.flattenChunks(this.chunks)}}this.chunks=[];this.err=s;this.msg=this.strm.msg};function h(t,u){var s=new i(u);s.push(t,!0);if(s.err){throw s.msg}return s.result}function j(s,t){t=t||{};t.raw=!0;return h(s,t)}f.Inflate=i;f.inflate=h;f.inflateRaw=j;f.ungzip=h},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")});function PngImage(){var m="",i=this,j=new PngToy(),a,b,n=0,g=0,c=!1;this.onload=null;this.onerror=null;Object.defineProperty(this,"src",{get:function(){return m},set:function(h){m=h;k()}});Object.defineProperty(this,"width",{get:function(){return n}});Object.defineProperty(this,"height",{get:function(){return g}});Object.defineProperty(this,"naturalWidth",{get:function(){return n}});Object.defineProperty(this,"naturalHeight",{get:function(){return g}});Object.defineProperty(this,"image",{get:function(){return b}});Object.defineProperty(this,"pngtoy",{get:function(){return j}});Object.defineProperty(this,"complete",{get:function(){return c}});function k(){j.fetch(m).then(e,f)}function e(h){j.decode(h).then(d,f)}function d(h){a=h;n=h.width;g=h.height;j.convertToCanvas(h,{ignoreAspectRatio:!1,useGamma:!1}).then(l.bind(i),f.bind(i))}function l(h){b=h;c=!0;if(i.onload){i.onload({timeStamp:Date.now()})}}function f(h){if(i.onerror){i.onerror({message:h,timeStamp:Date.now()})}}};